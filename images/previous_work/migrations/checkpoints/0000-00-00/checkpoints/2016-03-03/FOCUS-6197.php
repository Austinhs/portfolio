<?php

Migrations::depend('FOCUS-6359');
Migrations::depend('FOCUS-5469');
Migrations::depend('FOCUS-5468');

if(Database::$type === 'postgres') {
	Database::query('ALTER TABLE edit_rules ALTER COLUMN category TYPE varchar(255)');
	Database::query('ALTER TABLE edit_rules ALTER COLUMN name TYPE varchar(255)');
	Database::query('ALTER TABLE edit_rules ALTER COLUMN message TYPE varchar(255)');
}
else {
	Database::query('ALTER TABLE edit_rules ALTER COLUMN category varchar(255)');
	Database::query('ALTER TABLE edit_rules ALTER COLUMN name varchar(255)');
	Database::query('ALTER TABLE edit_rules ALTER COLUMN message varchar(255)');
}

// Import a bunch of edit rules for Florida districts
if(!empty($GLOBALS['_FOCUS']['config']['state_name']) && strtolower($GLOBALS['_FOCUS']['config']['state_name']) === 'florida') {
	$export = '[{"record":{"name":"IEP Plan Date must be within one year","enabled":1,"message":"IEP Plan date must be within one year","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_1205","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"1\",\"unit\":\"years\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"Fed State 60 If Grade Level on the Student Demographic Information record is PK, then Military Family Student code must be Z","enabled":1,"message":"Fed State 60 If Grade Level on the Student Demographic Information record is PK, then Military Family Student code must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"PK\"]","reversed":null},{"field":"custom_852","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"MDT eval date must be within 45 days of the refer date","enabled":1,"message":"MDT eval date must be within 45 days of the refer date","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_1594","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"45\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":{\"field\":\"custom_1592\",\"column\":null}}","reversed":null}]},{"record":{"name":"Fed State 58 If Grade Level = PK on the matching Student Demographic Information record, then NCLB Option, Choice with Transportation code must be Z","enabled":1,"message":"Fed State 58 If Grade Level = PK on the matching Student Demographic Information record, then NCLB Option, Choice with Transportation code must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"PK\"]","reversed":null},{"field":"custom_883","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"Fed State 51 If Grade is KG Immunization Status code must be 0, 1, 2, 3, or 4","enabled":1,"message":"Fed State 51 If Grade is KG Immunization Status code must be 0, 1, 2, 3, or 4","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_630","column":null,"type":"select","value":"[\"0\",\"1\",\"3\",\"4\",\"2\"]","reversed":1},{"field":"grade_id","column":null,"type":"select","value":"[\"KG\"]","reversed":null}]},{"record":{"name":"Fed State 64 If the Immigrant Student = Y, then the Country of Birth on the Student Demographic record must not be US or PR","enabled":1,"message":"Fed State 64 If the Immigrant Student = Y, then the Country of Birth on the Student Demographic record must not be US or PR","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_728","column":null,"type":"select","value":"[\"PR\",\"US\"]","reversed":1},{"field":"custom_775","column":null,"type":"select","value":"[\"Y\"]","reversed":null}]},{"record":{"name":"Fed State 61 If Grade is 07 Immunization Status code must be 0, 8, 2, 3, or 4","enabled":1,"message":"Fed State 61 If Grade is 07 Immunization Status code must be 0, 8, 2, 3, or 4","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_1651","column":null,"type":"select","value":"[\"07\"]","reversed":null},{"field":"custom_630","column":null,"type":"select","value":"[\"8\",\"0\",\"3\",\"4\",\"2\"]","reversed":1}]},{"record":{"name":"38.The code for Career Pathways Student Participant must be Y or N.","enabled":1,"message":"38.The code for Career Pathways Student Participant must be Y or N.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_203","column":null,"type":"select","value":"[\"\",\"N\",\"Y\"]","reversed":1}]},{"record":{"name":"37.Vocational, Single Parent and Single Pregnant Woman code must be S, W, B or Z.","enabled":1,"message":"37.Vocational, Single Parent and Single Pregnant Woman code must be S, W, B or Z.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_210","column":null,"type":"select","value":"[\"\",\"B\",\"Z\",\"W\",\"S\"]","reversed":1}]},{"record":{"name":"If ELL is LF then basis of exit first cannot be Z","enabled":1,"message":"If ELL is LF then basis of exit first cannot be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":null},{"field":"custom_661","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"ELL 77 if the English Language Learners: Basis of Exit (First) code is Z; and if the English Language Learners: Basis of Exit (Second) code is Z, then the English Language Learners, PK-12 code must be LP or LY","enabled":1,"message":"ELL 77 if the English Language Learners: Basis of Exit (First) code is Z; and if the English Language Learners: Basis of Exit (Second) code is Z, then the English Language Learners, PK-12 code must be LP or LY","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_660","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1},{"field":"custom_661","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null},{"field":"custom_856","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null},{"field":"custom_626","column":null,"type":"select","value":"[\"LP\",\"LY\"]","reversed":1}]},{"record":{"name":"ELL 65 English Language Learners: Basis of Exit (Second) code is not Z, then English Language Learners: Basis of Exit (First) code must be B, C, D, E, F or G","enabled":1,"message":"ELL 65 English Language Learners: Basis of Exit (Second) code is not Z, then English Language Learners: Basis of Exit (First) code must be B, C, D, E, F or G","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_661","column":null,"type":"select","value":"[\"D\",\"C\",\"B\",\"G\",\"E\",\"F\"]","reversed":1},{"field":"custom_856","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"Validate the Homeless fields - Homeless Student PK-12, Homeless Cause and Homeless Unaccompanied Youth","enabled":1,"message":"Validate the Homeless fields - Homeless Student PK-12, Homeless Cause and Homeless Unaccompanied Youth","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":1},{"field":"custom_952","column":null,"type":"select","value":"[\"Z\"]","reversed":null}]},{"record":{"name":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","enabled":1,"message":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null},{"field":"custom_952","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","enabled":1,"message":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":1},{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","enabled":1,"message":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1},{"field":"custom_952","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","enabled":1,"message":"A Homeless Unaccompanied Youth cannot be Z if Homeless Cause or Homeless Student PK-12 are not Z or a Homeless Unaccompanied Youth cannot be not Z and Homeless Cause or Homeless Student PK-12 indicates student is homeless","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"Fed State 63 If Grade Level equals PK or 9-12 on the matching Student Demographic Information record, then the Physical Education Waiver code must be Z","enabled":1,"message":"Fed State 63 If Grade Level equals PK or 9-12 on the matching Student Demographic Information record, then the Physical Education Waiver code must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_942","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1},{"field":"grade_id","column":null,"type":"select","value":"[\"09\",\"10\",\"11\",\"12\",\"PK\"]","reversed":null}]},{"record":{"name":"Fed State 56 If Grade Level on the matching Student Demographic Information record is PK, then NCLB Option, Supplemental Educational Services code must be Z","enabled":1,"message":"Fed State 56 If Grade Level on the matching Student Demographic Information record is PK, then NCLB Option, Supplemental Educational Services code must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_889","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1},{"field":"grade_id","column":null,"type":"select","value":"[\"PK\"]","reversed":null}]},{"record":{"name":"ELL 7 English Language Learners: Basis of Entry code must be A, R, L, or T","enabled":1,"message":"ELL 7 English Language Learners: Basis of Entry code must be A, R, L, or T","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_660","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null},{"field":"custom_626","column":null,"type":"select","value":"[\"LY\",\"LF\"]","reversed":null}]},{"record":{"name":"Home Language survey date cannot be 0 or greater than today","enabled":1,"message":"Home Language survey date cannot be 0 or greater than today","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_628","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"Fed State 26 If Homeless Student, PK-12 code is A, B, D, E or F, Homelessness Cause must be D,E,F,H,M,N,O,S,T,U or W","enabled":1,"message":"Fed State 26 If Homeless Student, PK-12 code is A, B, D, E or F, Homelessness Cause must be D,E,F,H,M,N,O,S,T,U or W","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":1},{"field":"custom_952","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"Fed State 26 If HomelessStudent, PK-12 code is N, Homelessness Cause must be Z","enabled":1,"message":"Fed State 26 If HomelessStudent ,PK-12 code is N, Homelessness Cause must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_952","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"Fed State 43 If Homeless Student, PK-12 code is A, B, D, E or F, Unaccompanied Youth must be Y or N","enabled":1,"message":"Fed State 43 If Homeless Student, PK-12 code is A, B, D, E or F, Unaccompanied Youth must be Y or N","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":1},{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"Fed State 43 If Homeless Student, PK-12 code is N, Unaccompanied Youth must be Z","enabled":1,"message":"Fed State 43 If Homeless Student, PK-12 code is N, Unaccompanied Youth must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_818","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1},{"field":"custom_820","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null}]},{"record":{"name":"Fed State 53 If Grade Level is PK on the matching Student Demographic Information record, then Prekindergarten Program Participation code must be C, D, F, H, L, M, S, T or V","enabled":1,"message":"Fed State 53 If Grade Level is PK on the matching Student Demographic Information record, then Prekindergarten Program Participation code must be C, D, F, H, L, M, S, T or V","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"PK\"]","reversed":null},{"field":"custom_640","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"If the student is an active ELL student both Languages cannot be English","enabled":1,"message":"If the student is an active ELL student both Languages cannot be English","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LY\"]","reversed":null},{"field":"custom_65","column":null,"type":"select","value":"[\"EN\"]","reversed":null},{"field":"custom_546","column":null,"type":"select","value":"[\"EN\"]","reversed":null}]},{"record":{"name":"At least one race field must be Yes.","enabled":1,"message":"At least one race field must be Yes.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_100000102","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_100000101","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_100000100","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_100000104","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null},{"field":"custom_100000103","column":null,"type":"select","value":"[\"\",\"N\"]","reversed":null}]},{"record":{"name":"Fed State 62 Grade Level = PK-05 on the Student Demographic Information record, then Reading Fluency must be Z","enabled":1,"message":"Fed State 62 Grade Level = PK-05 on the Student Demographic Information record, then Reading Fluency must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"01\",\"02\",\"03\",\"04\",\"05\",\"KG\",\"PK\"]","reversed":null},{"field":"custom_855","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"EOY 12 Postsecondary Education Plans code must be numeric and in the range 01-10 or 99","enabled":1,"message":"EOY 12 Postsecondary Education Plans code must be numeric and in the range 01-10 or 99","prevents_saving":null,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_761","column":null,"type":"select","value":"[\"\",\"04\",\"03\",\"02\",\"01\",\"07\",\"08\",\"99\",\"05\",\"06\",\"10\"]","reversed":1}]},{"record":{"name":"3O and 55.If Grade Level equals PK-8 or 09-11, then Postsecondary Education Plans code must equal 99.","enabled":null,"message":"3O and 55.If Grade Level equals PK-8 or 09-11, then Postsecondary Education Plans code must equal 99.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"KG\",\"PK\"]","reversed":null},{"field":"custom_761","column":null,"type":"select","value":"[\"\",\"99\"]","reversed":1}]},{"record":{"name":"56.If Grade Level = 12, then Postsecondary Education Plans code must equal 01-10.","enabled":1,"message":"56.If Grade Level = 12, then Postsecondary Education Plans code must equal 01-10.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_761","column":null,"type":"select","value":"[\"\",\"99\"]","reversed":null},{"field":"grade_id","column":null,"type":"select","value":"[\"12\"]","reversed":null}]},{"record":{"name":"EOY 9 Diploma Type must be W06, W6A, W6B, W07, W10, WFW, WFT, WFA, WFB, WGD, WGA, W27, W43, W45, W52 or ZZZ","enabled":1,"message":"EOY 9 Diploma Type must be W06, W6A, W6B, W07, W10, WFW, WFT, WFA, WFB, WGD, WGA, W27, W43, W45, W52 or ZZZ","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_112","column":null,"type":"select","value":"[\"\",\"W52\",\"W43\",\"W45\",\"ZZZ\",\"WGD\",\"W27\",\"W07\",\"W6B\",\"W6A\",\"W10\",\"WFT\",\"WFB\",\"WFA\",\"WFW\",\"WGA\",\"W06\"]","reversed":1}]},{"record":{"name":"32.If Diploma Type is W06, W6A, W6B, W07, W10, WFW, WFT, WFA, WFB, WGD, WGA or W27, Grade Level must be one of the grades 9-12. ","enabled":1,"message":"32.If Diploma Type is W06, W6A, W6B, W07, W10, WFW, WFT, WFA, WFB, WGD, WGA or W27, Grade Level must be one of the grades 9-12. ","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"09\",\"10\",\"11\",\"12\"]","reversed":1},{"field":"custom_112","column":null,"type":"select","value":"[\"WGD\",\"W27\",\"W07\",\"W6B\",\"W6A\",\"W10\",\"WFT\",\"WFB\",\"WFA\",\"WFW\",\"WGA\",\"W06\"]","reversed":null}]},{"record":{"name":"33.If Certificate of Completion, Type is W08, W8A or W09, Grade Level must be one of the grades 9-12","enabled":1,"message":"33.If Certificate of Completion, Type is W08, W8A or W09, Grade Level must be one of the grades 9-12","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"09\",\"10\",\"11\",\"12\"]","reversed":1},{"field":"custom_199","column":null,"type":"select","value":"[\"W08\",\"W8A\",\"W09\"]","reversed":null}]},{"record":{"name":"Fed State 57 If Grade Level on the matching Student Demographic Information record equals PK - 05, then the Mathematics Remediation Component code must be Z","enabled":1,"message":"Fed State 57 If Grade Level on the matching Student Demographic Information record equals PK - 05, then the Mathematics Remediation Component code must be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"01\",\"02\",\"03\",\"04\",\"05\",\"KG\",\"PK\"]","reversed":null},{"field":"custom_884","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"Birthdate cannot be set to a date in the future","enabled":1,"message":"Birthdate cannot be set to a date in the future","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_200000004","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"Validate the Homeless fields - Homeless Student PK-12, Homeless Cause and Homeless Unaccompanied Youth","enabled":1,"message":"Validate the Homeless fields - Homeless Student PK-12, Homeless Cause and Homeless Unaccompanied Youth","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_820","column":null,"type":"select","value":"[\"N\"]","reversed":null},{"field":"custom_952","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"ELL 2C if English Language Learners: Basis of Exit (First) is not Z, then English Language Learners: Exit Date must be greater than 0","enabled":1,"message":"ELL 2C if English Language Learners: Basis of Exit (First) is not Z, then English Language Learners: Exit Date must be greater than 0","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"empty\"}","reversed":null},{"field":"custom_661","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":1}]},{"record":{"name":"ELL 2B if either English Language Learners: Basis of Exit (First) or English Language Learners: Basis of Exit (Second) is code F, G or R, then English Language Learners: Exit Date must be prior to July 1, 2008","enabled":1,"message":"ELL 2B if either English Language Learners: Basis of Exit (First) or English Language Learners: Basis of Exit (Second) is code F, G or R, then English Language Learners: Exit Date must be prior to July 1, 2008","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_856","column":null,"type":"select","value":"[\"G\",\"F\",\"R\"]","reversed":null},{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"between\",\"comparison\":\"between\",\"start\":\"1970-01-01\",\"end\":\"2008-07-01\"}","reversed":1}]},{"record":{"name":"ELL 2A if English Language Learners: Basis of Exit (First) is code A, then English Language Learners: Exit Date must be prior to July 1, 2009","enabled":1,"message":"ELL 2A if English Language Learners: Basis of Exit (First) is code A, then English Language Learners: Exit Date must be prior to July 1, 2009","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_661","column":null,"type":"select","value":"[\"A\"]","reversed":null},{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"between\",\"comparison\":\"between\",\"start\":\"1970-01-01\",\"end\":\"2009-07-01\"}","reversed":1}]},{"record":{"name":"ELL 79 if the English Language Learners: Reclassification Exit Date is a valid date, then the English Language Learners code must be LF","enabled":null,"message":"ELL 79 if the English Language Learners: Reclassification Exit Date is a valid date, then the English Language Learners code must be LF","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":1},{"field":"custom_658","column":null,"type":"date","value":null,"reversed":null}]},{"record":{"name":"ELL 63 If the English Language Learners: Reclassification Exit Date is greater than zero, then the English Language Learners: Reclassification Exit Date must be equal to or greater than the English Language Learners: Reclassification Date","enabled":1,"message":"ELL 63 If the English Language Learners: Reclassification Exit Date is greater than zero, then the English Language Learners: Reclassification Exit Date must be equal to or greater than the English Language Learners: Reclassification Date","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_658","column":null,"type":"date","value":null,"reversed":null},{"field":"custom_648","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":{\"field\":\"custom_658\",\"column\":null}}","reversed":null}]},{"record":{"name":"If ELL is LF then reclass exit date cannot be 0 or more than two years ago and exit date cannot be no more than 2 years ago","enabled":1,"message":"If ELL is LF then reclass exit date cannot be 0 or more than two years ago","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":null},{"field":"custom_658","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"2\",\"unit\":\"years\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 62 English Language Learners: Reclassification Exit Date must be numeric and a valid date, unless zero-filled","enabled":1,"message":"ELL 62 English Language Learners: Reclassification Exit Date must be numeric and a valid date, unless zero-filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_658","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"If ELL is LF then exit date cannot be 0 of more than two years ago","enabled":1,"message":"If ELL is LF then exit date cannot be 0 or more than two years ago","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":null},{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"2\",\"unit\":\"years\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 76 English Language Learners: Exit Date is greater than zero, then the English Language Learners code must be LF","enabled":1,"message":"ELL 76 English Language Learners: Exit Date is greater than zero, then the English Language Learners code must be LF","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_645","column":null,"type":"date","value":null,"reversed":1},{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":1}]},{"record":{"name":"ELL 10 English Language Learners Exit Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 10 English Language Learners Exit Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"If Native Language is ZZ then SCHOOL must be 9995","enabled":1,"message":"If Native Language is ZZ then SCHOOL must be 9995","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_546","column":null,"type":"select","value":"[\"\",\"ZZ\"]","reversed":null},{"field":"school_id","column":null,"type":"select","value":"[\"9995 Title 1 Private School\"]","reversed":1}]},{"record":{"name":"If ELL is LF or LY then basis of entry cannot be Z","enabled":1,"message":"If ELL is LF or LY then basis of entry cannot be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":null},{"field":"custom_660","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"If ELL is LF or LY then basis of entry cannot be Z","enabled":1,"message":"If ELL is LF or LY then basis of entry cannot be Z","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LY\"]","reversed":null},{"field":"custom_660","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null}]},{"record":{"name":"Birthdate for Migrant must be valid","enabled":1,"message":"Birthdate for Migrant must be valid","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_200000004","column":null,"type":"date","value":"{\"relation\":\"between\",\"comparison\":\"between\",\"start\":\"1989-09-01\",\"end\":\"2012-08-31\"}","reversed":null},{"field":"custom_789","column":null,"type":"select","value":"[\"X\",\"E\",\"D\",\"B\",\"S\"]","reversed":null}]},{"record":{"name":"EOY 14 If Grade Level is PK-08 then Year Entered Ninth Grade, Graduation Requirements Determination must be 00000000. If Grade Level is 09, 10 or 11 then Year Entered Ninth Grade, Graduation Requirements Determination must be greater than zero","enabled":null,"message":"EOY 14 If Grade Level is PK-08 then Year Entered Ninth Grade, Graduation Requirements Determination must be 00000000.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"PK\"]","reversed":null},{"field":"custom_1429","column":null,"type":"select","value":"[]","reversed":1}]},{"record":{"name":"EOY 14 If Grade Level is PK-08 then Year Entered Ninth Grade, Graduation Requirements Determination must be 00000000. If Grade Level is 09, 10 or 11 then Year Entered Ninth Grade, Graduation Requirements Determination must be greater than zero","enabled":null,"message":"EOY 14 If Grade Level is 09, 10 or 11 then Year Entered Ninth Grade, Graduation Requirements Determination must be greater than zero","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_1429","column":null,"type":"select","value":"[]","reversed":null},{"field":"grade_id","column":null,"type":"select","value":"[\"09\",\"10\",\"11\",\"12\"]","reversed":null}]},{"record":{"name":"ELL 83 If English Language Learners, PK-12 on the Student Demographic Information record is LY or LF, then English Language Learners: Entry Date cannot be zero","enabled":1,"message":"ELL 83 If English Language Learners, PK-12 on the Student Demographic Information record is LY or LF, then English Language Learners: Entry Date cannot be zero","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LY\",\"LF\"]","reversed":null},{"field":"custom_642","column":null,"type":"date","value":null,"reversed":null}]},{"record":{"name":"ELL 9 English Language Learners Classification Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 9 English Language Learners Classification Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_644","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":1}]},{"record":{"name":"If ELL is LF or LY then classification date cannot be 0","enabled":1,"message":"If ELL is LF or LY then classification date cannot be 0","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LY\",\"LF\"]","reversed":null},{"field":"custom_644","column":null,"type":"date","value":null,"reversed":null}]},{"record":{"name":"ELL 13 English Language Learners Reclassification Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 13 English Language Learners Reclassification Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_648","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 20 If there is a valid English Language Learners: Reclassification Date, then the English Language Learners: Reclassification Date must be greater than or equal to a valid English Language Learners: Exit Date","enabled":1,"message":"ELL 20 If there is a valid English Language Learners: Reclassification Date, then the English Language Learners: Reclassification Date must be greater than or equal to a valid English Language Learners: Exit Date","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_648","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":{\"field\":\"custom_645\",\"column\":null}}","reversed":null}]},{"record":{"name":"ELL 82 English Language Learners: Classification Date must be greater than or equal to the English Language Learners: Home Language Survey Date, unless the ELL: Classification Date is zero filled","enabled":null,"message":"ELL 82 English Language Learners: Classification Date must be greater than or equal to the English Language Learners: Home Language Survey Date, unless the ELL: Classification Date is zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_644","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":{\"field\":\"custom_628\",\"column\":null}}","reversed":1}]},{"record":{"name":"IEP re-eval date is past due","enabled":1,"message":"IEP re-eval date is past due","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_874","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 6 English Language Learners: Entry Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 6 English Language Learners: Entry Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_642","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 8 English Language Learners: Student Plan Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 8 English Language Learners: Student Plan Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_643","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 18 The English Language Learners: Student Plan Date must be a valid date and be greater than or equal to the English Language Learners: Entry Date","enabled":1,"message":"ELL 18 The English Language Learners: Student Plan Date must be a valid date and be greater than or equal to the English Language Learners: Entry Date","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_643","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"prior_to\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"before\",\"relative_to\":{\"field\":\"custom_642\",\"column\":null}}","reversed":null}]},{"record":{"name":"ELL 11 English Language Learners Reevaluation Date must be numeric and a valid date less than or equal to the survey date unless zero filled","enabled":1,"message":"ELL 11 English Language Learners Reevaluation Date must be numeric and a valid date less than or equal to the survey date unless zero filled","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_646","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"0\",\"unit\":\"days\",\"direction\":\"after\",\"relative_to\":\"today\"}","reversed":null}]},{"record":{"name":"ELL 91 If English Language Learners, PK-12 on the Student Demographic Information record is not code LF and if English Language Learners: Entry Date is not zero, then it must be within six years of the Survey Date","enabled":1,"message":"ELL 91 If English Language Learners, PK-12 on the Student Demographic Information record is not code LF and if English Language Learners: Entry Date is not zero, then it must be within six years of the Survey Date","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_626","column":null,"type":"select","value":"[\"LF\"]","reversed":1},{"field":"custom_642","column":null,"type":"date","value":"{\"relation\":\"relative\",\"comparison\":\"following\",\"value\":\"6\",\"unit\":\"years\",\"direction\":\"before\",\"relative_to\":\"today\"}","reversed":1}]},{"record":{"name":"Zoned DISTRICT must be greater than 00 if Zoned SCHOOL is greater than 0000","enabled":1,"message":"Zoned DISTRICT must be greater than 00 if Zoned SCHOOL is greater than 0000","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_821","column":null,"type":"select","value":"[\"\",\"00\"]","reversed":null},{"field":"custom_822","column":null,"type":"select","value":"[\"\",\"0000\"]","reversed":1}]},{"record":{"name":"Fed State 29 If Career and Professional Academy Identifier (First) is not ZZZ then District Number, Current Instruction\/Service: CAPE (First) must not be 00","enabled":1,"message":"Fed State 29 If Career and Professional Academy Identifier (First) is not ZZZ then District Number, Current Instruction\/Service: CAPE (First) must not be 00","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_20009126","column":null,"type":"select","value":"[]","reversed":1},{"field":"custom_20009128","column":null,"type":"select","value":"[\"\",\"00\"]","reversed":null}]},{"record":{"name":"Fed State 29 If District Number, Current Instruction\/Service: CAPE (First) is not 00 then Career and Professional Academy Identifier (First) must not be ZZZ","enabled":1,"message":"Fed State 29 If District Number, Current Instruction\/Service: CAPE (First) is not 00 then Career and Professional Academy Identifier (First) must not be ZZZ","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_20009126","column":null,"type":"select","value":"[]","reversed":null},{"field":"custom_20009128","column":null,"type":"select","value":"[\"\",\"00\"]","reversed":1}]},{"record":{"name":"Fed State 29 If Career and Professional Academy Identifier (Second) is not ZZZ then District Number, Current Instruction\/Service: CAPE (Second) must not be 00","enabled":1,"message":"Fed State 29 If Career and Professional Academy Identifier (Second) is not ZZZ then District Number, Current Instruction\/Service: CAPE (Second) must not be 00","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_20009129","column":null,"type":"select","value":"[\"\",\"00\"]","reversed":null},{"field":"custom_20009127","column":null,"type":"select","value":"[]","reversed":1}]},{"record":{"name":"Fed State 30 If District Number, Current Instruction\/Service: CAPE (Second) is not 00 then Career and Professional Academy Identifier (Second) must not be ZZZ","enabled":1,"message":"Fed State 30 If District Number, Current Instruction\/Service: CAPE (Second) is not 00 then Career and Professional Academy Identifier (Second) must not be ZZZ","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_20009129","column":null,"type":"select","value":"[\"\",\"00\"]","reversed":1},{"field":"custom_20009127","column":null,"type":"select","value":"[]","reversed":null}]},{"record":{"name":"4A.If Additional School Year Student (on the Student Demographic Information record) = S or F, then Grade Promotion Status must be P, D, or N.","enabled":1,"message":"4A.If Additional School Year Student (on the Student Demographic Information record) = S or F, then Grade Promotion Status must be P, D, or N.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_699","column":null,"type":"select","value":"[\"F\",\"S\"]","reversed":null},{"field":"custom_11","column":null,"type":"select","value":"[\"D - Disabled Opted to stay in schl\",\"N - Not in KG-12 at year end\",\"P - Academically Promoted\"]","reversed":1}]},{"record":{"name":"Fed State 13 If Immigrant Student code is Z, then the School Number, Current Enrollment must be 3518","enabled":1,"message":"Fed State 13 If Immigrant Student code is Z, then the School Number, Current Enrollment must be 3518","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_775","column":null,"type":"select","value":"[\"\",\"Z\"]","reversed":null},{"field":"school_id","column":null,"type":"select","value":"[\"3518 McKay  Scholarship\\\/School Of Enrollment\"]","reversed":1}]},{"record":{"name":"ELL 2B if either English Language Learners: Basis of Exit (First) or English Language Learners: Basis of Exit (Second) is code F, G or R, then English Language Learners: Exit Date must be prior to July 1, 2008","enabled":1,"message":"ELL 2B if either English Language Learners: Basis of Exit (First) or English Language Learners: Basis of Exit (Second) is code F, G or R, then English Language Learners: Exit Date must be prior to July 1, 2008","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_661","column":null,"type":"select","value":"[\"G\",\"F\",\"R\"]","reversed":null},{"field":"custom_645","column":null,"type":"date","value":"{\"relation\":\"between\",\"comparison\":\"between\",\"start\":\"1970-01-01\",\"end\":\"2008-07-01\"}","reversed":1}]},{"record":{"name":"If neg del 1 is 0000 then neg del 2 must be 0000 and if both 1 and 2 are 0000 then neg del 3 must also be 0000","enabled":1,"message":"If neg del 1 is 0000 then neg del 2 must be 0000 and if both 1 and 2 are 0000 then neg del 3 must also be 0000","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_808","column":null,"type":"text","value":"0000","reversed":null},{"field":"custom_807","column":null,"type":"text","value":"0000","reversed":1}]},{"record":{"name":"If neg del 1 is 0000 then neg del 2 must be 0000 and if both 1 and 2 are 0000 then neg del 3 must also be 0000","enabled":1,"message":"If neg del 1 is 0000 then neg del 2 must be 0000 and if both 1 and 2 are 0000 then neg del 3 must also be 0000","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"custom_807","column":null,"type":"text","value":"0000","reversed":1},{"field":"custom_100000106","column":null,"type":"text","value":"0000","reversed":null},{"field":"custom_808","column":null,"type":"text","value":"0000","reversed":null}]},{"record":{"name":"3C.If Diploma Type is W43, W45 or W52, Grade Level must be 30 or 31.","enabled":1,"message":"3C.If Diploma Type is W43, W45 or W52, Grade Level must be 30 or 31.","prevents_saving":1,"category":"SISStudent","system":null,"deleted":null},"criteria":[{"field":"grade_id","column":null,"type":"select","value":"[\"30\",\"31\"]","reversed":1},{"field":"custom_112","column":null,"type":"select","value":"[\"W52\",\"W43\",\"W45\"]","reversed":null}]}]';
	$export = json_decode($export, true);
	$import = EditRuleExporter::import($export);
}
